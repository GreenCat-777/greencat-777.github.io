<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>404 | Page Not Found</title>
<link rel="stylesheet" href="style.css">

<style>
.snake-container {
    text-align: center;
}

#snakeGame {
    border: 2px solid #0ed145;
    margin-top: 20px;
    touch-action: none; /* prevent scrolling on mobile */
}

.button-snake {
    display: inline-block;
    padding: 10px 25px;
    margin-top: 20px;
    border: 2px solid #0ed145;
    border-radius: 6px;
    color: #0ed145;
    background: none;
    cursor: pointer;
    transition: all 0.3s;
}

.button-snake:hover {
    background-color: #0ed145;
    color: #000000;
}
</style>
</head>

<body>

<a href="./" class="back-home">Home</a>

<div class="container snake-container" id="content">
    <h1>404</h1>
    <h2>Page not found</h2>
    <p>Oops! Looks like youâ€™re lost.</p>
    <button class="button-snake" onclick="startSnake()">Wanna Play Snake?</button>
</div>

<script>
let gameRunning = false;

function startSnake() {
    if (gameRunning) return;
    gameRunning = true;

    const container = document.getElementById("content");
    container.innerHTML = `
        <h2>Snake Game</h2>
        <canvas id="snakeGame" width="300" height="300"></canvas>
        <p>Use Arrow keys, WASD, or swipe to move.</p>
    `;

    const canvas = document.getElementById("snakeGame");
    const ctx = canvas.getContext("2d");

    const box = 15;
    const cols = canvas.width / box;
    const rows = canvas.height / box;

    let snake = [{ x: Math.floor(cols/2)*box, y: Math.floor(rows/2)*box }];
    let food = {
        x: Math.floor(Math.random()*cols)*box,
        y: Math.floor(Math.random()*rows)*box
    };
    let d;
    let score = 0;

    /* ---------- KEYBOARD CONTROLS (ARROWS + WASD) ---------- */
    document.addEventListener("keydown", function(e) {
        const key = e.key.toLowerCase();
        if ((key === "arrowleft" || key === "a") && d !== "RIGHT") d = "LEFT";
        else if ((key === "arrowup" || key === "w") && d !== "DOWN") d = "UP";
        else if ((key === "arrowright" || key === "d") && d !== "LEFT") d = "RIGHT";
        else if ((key === "arrowdown" || key === "s") && d !== "UP") d = "DOWN";
    });

    /* ---------- TOUCH CONTROLS ---------- */
    let startX = 0;
    let startY = 0;

    canvas.addEventListener("touchstart", e => {
        const t = e.touches[0];
        startX = t.clientX;
        startY = t.clientY;
    }, { passive: true });

    canvas.addEventListener("touchend", e => {
        const t = e.changedTouches[0];
        const dx = t.clientX - startX;
        const dy = t.clientY - startY;

        if (Math.abs(dx) > Math.abs(dy)) {
            if (dx > 0 && d !== "LEFT") d = "RIGHT";
            else if (dx < 0 && d !== "RIGHT") d = "LEFT";
        } else {
            if (dy > 0 && d !== "UP") d = "DOWN";
            else if (dy < 0 && d !== "DOWN") d = "UP";
        }
    }, { passive: true });

    function collision(head, body) {
        return body.some(seg => seg.x === head.x && seg.y === head.y);
    }

    function draw() {
        ctx.fillStyle = "#000";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        snake.forEach(seg => {
            ctx.fillStyle = "#0ed145";
            ctx.fillRect(seg.x, seg.y, box, box);
        });

        ctx.fillStyle = "#fff";
        ctx.fillRect(food.x, food.y, box, box);

        let snakeX = snake[0].x;
        let snakeY = snake[0].y;

        if (d === "LEFT") snakeX -= box;
        if (d === "UP") snakeY -= box;
        if (d === "RIGHT") snakeX += box;
        if (d === "DOWN") snakeY += box;

        if (snakeX === food.x && snakeY === food.y) {
            score++;
            food = {
                x: Math.floor(Math.random()*cols)*box,
                y: Math.floor(Math.random()*rows)*box
            };
        } else {
            snake.pop();
        }

        const newHead = { x: snakeX, y: snakeY };

        if (
            snakeX < 0 || snakeX >= canvas.width ||
            snakeY < 0 || snakeY >= canvas.height ||
            collision(newHead, snake)
        ) {
            clearInterval(game);
            alert("Game Over! Score: " + score);
            location.reload();
        }

        snake.unshift(newHead);
    }

    const game = setInterval(draw, 150);
}
</script>

</body>
</html>
